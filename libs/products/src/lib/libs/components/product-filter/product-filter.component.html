<!-- Filter Dropdown Button -->
<div class="filter-dropdown-container">
  <button
    mat-raised-button
    [matMenuTriggerFor]="filterMenu"
    class="filter-button"
  >
    <mat-icon>filter_list</mat-icon>
    Filters
    <mat-icon>arrow_drop_down</mat-icon>
  </button>

  <mat-menu #filterMenu="matMenu" class="filter-menu">
    <div class="filter-content" (click)="$event.stopPropagation()">
      <ng-container *ngTemplateOutlet="filters"></ng-container>
    </div>
  </mat-menu>
</div>

<!-- Filter Template -->
<ng-template #filters>
  <div class="filter-sections">
    <!-- Size Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>straighten</mat-icon>
          Size
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let size of sizes" class="filter-option">
          <mat-checkbox
            [id]="'size-' + size"
            [value]="size"
            [(ngModel)]="selectedSizes"
            (change)="onFilterChange()"
          >
            {{ size }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Category Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>category</mat-icon>
          Category
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let category of categories" class="filter-option">
          <mat-checkbox
            [id]="'category-' + category"
            [value]="category"
            [(ngModel)]="selectedCategories"
            (change)="onFilterChange()"
          >
            {{ category }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Colour Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>palette</mat-icon>
          Colour
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let colour of colours" class="filter-option">
          <mat-checkbox
            [id]="'colour-' + colour"
            [value]="colour"
            [(ngModel)]="selectedColours"
            (change)="onFilterChange()"
          >
            {{ colour }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Brand Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>business</mat-icon>
          Brand
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let brand of brands" class="filter-option">
          <mat-checkbox
            [id]="'brand-' + brand"
            [value]="brand"
            [(ngModel)]="selectedBrands"
            (change)="onFilterChange()"
          >
            {{ brand }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Heel Type Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>safety_divider</mat-icon>
          Heel Type
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let heel of heelTypes" class="filter-option">
          <mat-checkbox
            [id]="'heel-' + heel"
            [value]="heel"
            [(ngModel)]="selectedHeelTypes"
            (change)="onFilterChange()"
          >
            {{ heel }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Price Section -->
    <mat-expansion-panel class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>attach_money</mat-icon>
          Price
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="filter-options">
        <div *ngFor="let price of prices" class="filter-option">
          <mat-checkbox
            [id]="'price-' + price"
            [value]="price"
            [(ngModel)]="selectedPrices"
            (change)="onFilterChange()"
          >
            {{ price }}
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Clear Filters Button -->
    <div class="clear-filters-section">
      <button mat-outlined-button color="warn" (click)="clearAllFilters()">
        <mat-icon>clear</mat-icon>
        Clear All Filters
      </button>
    </div>
  </div>
</ng-template>
